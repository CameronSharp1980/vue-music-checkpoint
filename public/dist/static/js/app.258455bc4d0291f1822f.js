webpackJsonp([0],[,,function(t,s,n){"use strict";var e=n(1),o=n(22),i=n(13),a=n.n(i),l=!window.location.host.includes("localhost"),c=l?"//vue-music.herokuapp.com":"//localhost:3000";e.a.use(o.a);var r=new o.a.Store({state:{activePlaylist:"",myPlaylists:[],myTunes:[],results:[]},mutations:{setResults:function(t,s){t.results=s},setMyPlaylists:function(t,s){t.myPlaylists=s,t.activePlaylist=t.myPlaylists[0]},setMyTunes:function(t,s){s.sort(function(t,s){return t.ranking<s.ranking?-1:t.ranking>s.ranking?1:0}),console.log("Data: ",s),t.myTunes=s},pushMyTune:function(t,s){t.myTunes.push(s)}},actions:{getMusicByArtist:function(t,s){var n=t.commit,e=(t.dispatch,"https://itunes.apple.com/search?term="+s);encodeURIComponent(e);a.a.get(e).then(function(t){t=JSON.parse(t),console.log(t),n("setResults",t.results)}).fail(function(t){console.log(t)})},getPlaylists:function(t){var s=t.commit,n=(t.dispatch,c+"/api/playlists");a.a.get(n).then(function(t){console.log("Playlist data: ",t),s("setMyPlaylists",t)}).fail(function(t){console.log(t)})},getMyTunes:function(t){var s=t.commit,n=(t.dispatch,c+"/api/songs");a.a.get(n).then(function(t){console.log("Song data: ",t),s("setMyTunes",t)}).fail(function(t){console.log(t)})},addToMyTunes:function(t,s){var n=(t.commit,t.dispatch);console.log("From store: ",s);var e=c+"/api/songs",o={title:s.song.trackName,albumArt:s.song.artworkUrl100,artist:s.song.artistName,coll:s.song.collectionName,price:s.song.trackPrice,preview:s.song.previewUrl,kind:s.song.kind,ranking:s.myTunes.length,playlistId:s.activePlaylist._id};a.a.post(e,o).then(function(t){console.log("Response after posting song: ",t),n("getPlaylists").then(n("getMyTunes"))}).fail(function(t){console.log(t)})},removeTrack:function(t,s){for(var n=(t.commit,t.dispatch),e=0,o=0;o<s.myTunes.length;o++){if(s.myTunes[o]._id==s.songId){e=o;break}}for(var i=e+1;i<s.myTunes.length;i++){var l=s.myTunes[i];a.a.ajax({method:"PUT",url:c+"/api/songs/"+l._id,data:{ranking:i-1}})}console.log("Deleted Index: ",e),console.log("Removing song at ID: ",s.songId),a.a.ajax({method:"DELETE",url:c+"/api/songs/"+s.songId}).then(function(t){console.log("Response after deleting song: ",t),n("getPlaylists").then(n("getMyTunes"))}).fail(function(t){console.log(t)})},promoteTrack:function(t,s){for(var n=(t.commit,t.dispatch),e=0;e<s.myTunes.length;e++)if(s.myTunes[e]._id==s.song._id){if(0==e)break;console.log("Promoting track: ",s.myTunes[e]._id,s.myTunes[e].title),a.a.ajax({method:"PUT",url:c+"/api/songs/"+s.myTunes[e]._id,data:{ranking:e-1}}).then(function(t){console.log("Promoting song: ",s.myTunes[e].title+"to ranking (index) : ",e-1)}).fail(function(t){console.log(t)}),a.a.ajax({method:"PUT",url:c+"/api/songs/"+s.myTunes[e-1]._id,data:{ranking:s.myTunes[e-1].ranking+1}}).then(function(t){console.log("Demoting song: ",s.myTunes[e-1].title+"to ranking (index) : ",e+1),n("getPlaylists").then(n("getMyTunes"))}).fail(function(t){console.log(t)});break}},demoteTrack:function(t,s){for(var n=(t.commit,t.dispatch),e=0;e<s.myTunes.length;e++)if(s.myTunes[e]._id==s.song._id){if(e==s.myTunes.length-1)break;console.log("Demoting track: ",s.myTunes[e]._id,s.myTunes[e].title),a.a.ajax({method:"PUT",url:c+"/api/songs/"+s.myTunes[e]._id,data:{ranking:e+1}}).then(function(t){console.log("Demoting song: ",s.myTunes[e].title+"to ranking (index) : ",e+1)}).fail(function(t){console.log(t)}),a.a.ajax({method:"PUT",url:c+"/api/songs/"+s.myTunes[e+1]._id,data:{ranking:s.myTunes[e+1].ranking-1}}).then(function(t){console.log("Promoting song: ",s.myTunes[e+1].title+"to ranking (index) : ",e-1),n("getPlaylists").then(n("getMyTunes"))}).fail(function(t){console.log(t)});break}}}});s.a=r},function(t,s,n){n(10);var e=n(0)(n(4),n(18),null,null);t.exports=e.exports},function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n(14),o=n.n(e);s.default={name:"app",components:{Home:o.a}}},function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n(16),o=n.n(e),i=n(15),a=n.n(i);s.default={name:"home",components:{MyTunes:o.a,Itunes:a.a},data:function(){return{}}}},function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"Itunes",data:function(){return{searchField:""}},methods:{getMusicByArtist:function(){this.$store.dispatch("getMusicByArtist",this.searchField)},addToMyTunes:function(t,s,n){this.$store.dispatch("addToMyTunes",{song:t,activePlaylist:s,myTunes:n})}},computed:{searchResults:function(){return this.$store.state.results},activePlaylist:function(){return this.$store.state.activePlaylist},myTunes:function(){return this.$store.state.myTunes}}},document.addEventListener("play",function(t){for(var s=document.getElementsByClassName("audio-preview"),n=0;n<s.length;n++)s[n]!=t.target&&s[n].pause()},!0)},function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"MyTunes",data:function(){return{}},mounted:function(){this.$store.dispatch("getPlaylists"),this.$store.dispatch("getMyTunes")},methods:{removeTrack:function(t,s){this.$store.dispatch("removeTrack",{songId:t,myTunes:s})},promoteTrack:function(t,s){this.$store.dispatch("promoteTrack",{song:t,myTunes:s})},demoteTrack:function(t,s){this.$store.dispatch("demoteTrack",{song:t,myTunes:s})}},computed:{myPlaylists:function(){return this.$store.state.myPlaylists},myTunes:function(){return this.$store.state.myTunes}}}},function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n(1),o=n(3),i=n.n(o),a=n(2);new e.a({el:"#app",template:"<App/>",store:a.a,components:{App:i.a}})},function(t,s){},function(t,s){},function(t,s){},function(t,s){},,function(t,s,n){n(12);var e=n(0)(n(5),n(20),null,null);t.exports=e.exports},function(t,s,n){n(11);var e=n(0)(n(6),n(19),null,null);t.exports=e.exports},function(t,s,n){n(9);var e=n(0)(n(7),n(17),null,null);t.exports=e.exports},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"mytunes"},t._l(t.myPlaylists,function(s,e){return n("div",{staticClass:"songList"},[n("div",{staticClass:"playlist-title glass text-center"},[n("h2",{staticClass:"playlist-title"},[t._v(t._s(s.name))])]),t._v(" "),n("div",{staticClass:"row"},t._l(t.myTunes,function(e,o){return e.playlistId==s._id?n("div",{staticClass:"song-list col-sm-10 col-sm-offset-1 song-box glass"},[n("div",{staticClass:"song-pic"},[n("button",{staticClass:"glyphicon glyphicon-trash pull-right list-button l-margin-5",on:{click:function(s){t.removeTrack(e._id,t.myTunes)}}}),t._v(" "),n("button",{staticClass:"glyphicon glyphicon-chevron-up pull-right list-button l-margin-5",on:{click:function(s){t.promoteTrack(e,t.myTunes)}}}),t._v(" "),n("button",{staticClass:"glyphicon glyphicon-chevron-down pull-right list-button",on:{click:function(s){t.demoteTrack(e,t.myTunes)}}}),t._v(" "),n("img",{staticClass:"song-thumb",attrs:{src:e.albumArt,alt:"Album art"}})]),t._v(" "),n("h5",{staticClass:"song-title"},[t._v(t._s(e.title)+" : "+t._s(e.artist))]),t._v(" "),n("div",[n("audio",{staticClass:"audio-preview",attrs:{controls:"",src:e.preview,preload:"auto"}})])]):t._e()}))])}))},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{attrs:{id:"app"}},[n("home")],1)},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"itunes"},[n("div",[n("form",{staticClass:"text-center glass search-box",on:{submit:function(s){s.preventDefault(),t.getMusicByArtist(s)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchField,expression:"searchField"}],staticClass:"search-field",attrs:{type:"text",placeholder:"Artist name"},domProps:{value:t.searchField},on:{input:function(s){s.target.composing||(t.searchField=s.target.value)}}}),t._v(" "),n("button",{staticClass:"btn btn-primary glyphicon glyphicon-search search-button",attrs:{type:"submit"}})])]),t._v(" "),n("div",{staticClass:"row"},t._l(t.searchResults,function(s,e){return"song"==s.kind?n("div",{staticClass:"songList col-sm-10 col-sm-offset-1 song-box glass"},[n("div",{staticClass:"text-center song-pic"},[n("button",{staticClass:"glyphicon glyphicon-plus pull-right list-button",on:{click:function(n){t.addToMyTunes(s,t.activePlaylist,t.myTunes)}}}),t._v(" "),n("img",{staticClass:"song-thumb",attrs:{src:s.artworkUrl100,alt:"Album art"}})]),t._v(" "),n("div",{staticClass:"text-center"},[n("h1",{staticClass:"song-title"},[t._v(t._s(s.trackName))]),t._v(" "),n("h3",{staticClass:"song-collection"},[t._v(t._s(s.artistName)+" - "+t._s(s.collectionName)+" - Track # "+t._s(s.trackNumber))])]),t._v(" "),n("div",{staticClass:"text-center"},[n("audio",{staticClass:"audio-preview",attrs:{controls:"",src:s.previewUrl,preload:"auto"}})])]):t._e()}))])},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"home"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("my-tunes",{staticClass:"my-tunes col-sm-12 col-md-6"}),t._v(" "),n("itunes",{staticClass:"itunes col-sm-12 col-md-6"})],1)])])},staticRenderFns:[]}}],[8]);
//# sourceMappingURL=app.258455bc4d0291f1822f.js.map